{"repository_name":"leveldb","body":"# LevelDB.cr\n\n[![CI](https://github.com/kojix2/leveldb/actions/workflows/ci.yml/badge.svg)](https://github.com/kojix2/leveldb/actions/workflows/ci.yml)\n[![Lines of Code](https://img.shields.io/endpoint?url=https%3A%2F%2Ftokei.kojix2.net%2Fbadge%2Fgithub%2Fkojix2%2Fleveldb%2Flines)](https://tokei.kojix2.net/github/kojix2/leveldb)\n![Static Badge](https://img.shields.io/badge/PURE-VIBE_CODING-magenta)\n\nCrystal bindings for Google LevelDB\n\n## Requirements\n\n- macOS: `brew install leveldb`\n- Ubuntu/Debian: `sudo apt-get install -y libleveldb-dev`\n\n## Install\n\nAdd to `shard.yml`:\n\n```yaml\ndependencies:\n  leveldb:\n    github: kojix2/leveldb\n```\n\nThen install:\n\n```sh\nshards install\n```\n\n## Quick start\n\n```crystal\nrequire \"leveldb\"\n\nopts = LevelDB::Options.build { |o| o.create_if_missing true }\n\nLevelDB::DB.open(\"/tmp/mydb\", opts) do |db|\n  db.put \"hello\", \"world\"\n  db[\"hello\"]           # => \"world\"\n  db.delete \"hello\"\n  db[\"hello\"]           # => nil\nend\n```\n\n### Iterate\n\n```crystal\nLevelDB::DB.open(\"/tmp/mydb\", opts) do |db|\n  db.each_string { |k, v| puts \"#{k} #{v}\" }\n\n  db.iterator do |it|\n    it.seek(\"b\")\n    while it.valid?\n      puts it.key_string\n      it.next\n    end\n    it.check_error\n  end\nend\n```\n\n### Batch\n\n```crystal\nLevelDB::DB.open(\"/tmp/mydb\", opts) do |db|\n  batch = LevelDB::WriteBatch.build do |b|\n    b.put \"user:1\", \"Alice\"\n    b.put \"user:2\", \"Bob\"\n    b.delete \"old\"\n  end\n  db.write batch\n  batch.close\nend\n```\n\n## Errors\n\nOn failure, methods raise `LevelDB::Error`.\n\n## Tests\n\n```sh\ncrystal spec\n```\n","program":{"html_id":"leveldb/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"leveldb","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"leveldb/LevelDB","path":"LevelDB.html","kind":"module","full_name":"LevelDB","name":"LevelDB","abstract":false,"locations":[{"filename":"src/leveldb.cr","line_number":8,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb.cr#L8"},{"filename":"src/leveldb/db.cr","line_number":4,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L4"},{"filename":"src/leveldb/errors.cr","line_number":1,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/errors.cr#L1"},{"filename":"src/leveldb/iterator.cr","line_number":4,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L4"},{"filename":"src/leveldb/lib_leveldb.cr","line_number":1,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/lib_leveldb.cr#L1"},{"filename":"src/leveldb/options.cr","line_number":1,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L1"},{"filename":"src/leveldb/write_batch.cr","line_number":3,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L3"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"{{ (`shards version /home/runner/work/leveldb/leveldb/src`).chomp.stringify }}"}],"class_methods":[{"html_id":"raise_if_error(errptr:Pointer(Pointer(LibC::Char)))-class-method","name":"raise_if_error","doc":"Internal helper to check C error pointer, raise if set, and free.","summary":"<p>Internal helper to check C error pointer, raise if set, and free.</p>","abstract":false,"args":[{"name":"errptr","external_name":"errptr","restriction":"Pointer(Pointer(LibC::Char))"}],"args_string":"(errptr : Pointer(Pointer(LibC::Char)))","args_html":"(errptr : Pointer(Pointer(LibC::Char)))","location":{"filename":"src/leveldb/errors.cr","line_number":7,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/errors.cr#L7"},"def":{"name":"raise_if_error","args":[{"name":"errptr","external_name":"errptr","restriction":"Pointer(Pointer(LibC::Char))"}],"visibility":"Public","body":"cstr_ptr = errptr.value\nif cstr_ptr.null?\n  return\nend\nbegin\n  message = String.new(cstr_ptr)\n  raise(Error.new(message))\nensure\n  LibLevelDB.free(cstr_ptr.as(::Pointer(Void)))\n\n  errptr.value = Pointer(LibC::Char).null\nend\n"},"external_var":false}],"types":[{"html_id":"leveldb/LevelDB/DB","path":"LevelDB/DB.html","kind":"class","full_name":"LevelDB::DB","name":"DB","abstract":false,"superclass":{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"leveldb/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/leveldb/db.cr","line_number":5,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L5"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"leveldb/LevelDB","kind":"module","full_name":"LevelDB","name":"LevelDB"},"class_methods":[{"html_id":"open(path:String,options:Options=Options.new,&)-class-method","name":"open","doc":"RAII-friendly block helper","summary":"<p>RAII-friendly block helper</p>","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"},{"name":"options","default_value":"Options.new","external_name":"options","restriction":"Options"}],"args_string":"(path : String, options : Options = Options.new, &)","args_html":"(path : String, options : <a href=\"../LevelDB/Options.html\">Options</a> = <span class=\"t\">Options</span>.new, &)","location":{"filename":"src/leveldb/db.cr","line_number":23,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L23"},"def":{"name":"open","args":[{"name":"path","external_name":"path","restriction":"String"},{"name":"options","default_value":"Options.new","external_name":"options","restriction":"Options"}],"yields":1,"block_arity":1,"visibility":"Public","body":"db = new(path, options)\nbegin\n  yield db\nensure\n  db.close\nend\n"},"external_var":false}],"constructors":[{"html_id":"new(path:String,options:Options=Options.new)-class-method","name":"new","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"},{"name":"options","default_value":"Options.new","external_name":"options","restriction":"Options"}],"args_string":"(path : String, options : Options = Options.new)","args_html":"(path : String, options : <a href=\"../LevelDB/Options.html\">Options</a> = <span class=\"t\">Options</span>.new)","location":{"filename":"src/leveldb/db.cr","line_number":8,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L8"},"def":{"name":"new","args":[{"name":"path","external_name":"path","restriction":"String"},{"name":"options","default_value":"Options.new","external_name":"options","restriction":"Options"}],"visibility":"Public","body":"_ = allocate\n_.initialize(path, options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"[](key:Bytes|String):String|Nil-instance-method","name":"[]","doc":"[] operator for convenient string access","summary":"<p>[] operator for convenient string access</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"}],"args_string":"(key : Bytes | String) : String | Nil","args_html":"(key : Bytes | String) : String | Nil","location":{"filename":"src/leveldb/db.cr","line_number":79,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L79"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"}],"return_type":"String | ::Nil","visibility":"Public","body":"get_string(key)"},"external_var":false},{"html_id":"close-instance-method","name":"close","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":32,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L32"},"def":{"name":"close","visibility":"Public","body":"if @closed\n  return\nend\n@closed = true\nif @ptr.null?\nelse\n  LibLevelDB.close(@ptr)\nend\n@ptr = Pointer(Void).null.as(LibLevelDB::DB)\n"},"external_var":false},{"html_id":"closed?:Bool-instance-method","name":"closed?","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":39,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L39"},"def":{"name":"closed?","visibility":"Public","body":"@closed"},"external_var":false},{"html_id":"compact-instance-method","name":"compact","doc":"Compact the entire database","summary":"<p>Compact the entire database</p>","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":135,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L135"},"def":{"name":"compact","visibility":"Public","body":"ensure_not_closed!\nLibLevelDB.compact_range(@ptr, Pointer(LibC::Char).null, 0, Pointer(LibC::Char).null, 0)\n"},"external_var":false},{"html_id":"compact_range(start_key:Bytes|String,limit_key:Bytes|String)-instance-method","name":"compact_range","doc":"Compact the underlying storage for the key range [start_key, limit_key]","summary":"<p>Compact the underlying storage for the key range [start_key, limit_key]</p>","abstract":false,"args":[{"name":"start_key","external_name":"start_key","restriction":"Bytes | String"},{"name":"limit_key","external_name":"limit_key","restriction":"Bytes | String"}],"args_string":"(start_key : Bytes | String, limit_key : Bytes | String)","args_html":"(start_key : Bytes | String, limit_key : Bytes | String)","location":{"filename":"src/leveldb/db.cr","line_number":127,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L127"},"def":{"name":"compact_range","args":[{"name":"start_key","external_name":"start_key","restriction":"Bytes | String"},{"name":"limit_key","external_name":"limit_key","restriction":"Bytes | String"}],"visibility":"Public","body":"ensure_not_closed!\nstart_ptr, start_len = to_bytes(start_key)\nlimit_ptr, limit_len = to_bytes(limit_key)\nLibLevelDB.compact_range(@ptr, start_ptr, start_len, limit_ptr, limit_len)\n"},"external_var":false},{"html_id":"create_snapshot:LibLevelDB::Snapshot-instance-method","name":"create_snapshot","doc":"Create a snapshot of the current DB state","summary":"<p>Create a snapshot of the current DB state</p>","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":103,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L103"},"def":{"name":"create_snapshot","return_type":"LibLevelDB::Snapshot","visibility":"Public","body":"ensure_not_closed!\nLibLevelDB.create_snapshot(@ptr)\n"},"external_var":false},{"html_id":"delete(key:Bytes|String,write_options:WriteOptions=WriteOptions.new)-instance-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"write_options","default_value":"WriteOptions.new","external_name":"write_options","restriction":"WriteOptions"}],"args_string":"(key : Bytes | String, write_options : WriteOptions = WriteOptions.new)","args_html":"(key : Bytes | String, write_options : <a href=\"../LevelDB/WriteOptions.html\">WriteOptions</a> = <span class=\"t\">WriteOptions</span>.new)","location":{"filename":"src/leveldb/db.cr","line_number":83,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L83"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"write_options","default_value":"WriteOptions.new","external_name":"write_options","restriction":"WriteOptions"}],"visibility":"Public","body":"ensure_not_closed!\nkey_ptr, key_len = to_bytes(key)\nerr = Pointer(Pointer(LibC::Char)).malloc(1_u64)\nerr.value = Pointer(LibC::Char).null\nLibLevelDB.delete(@ptr, write_options.handle, key_ptr, key_len, err)\nLevelDB.raise_if_error(err)\nnil\n"},"external_var":false},{"html_id":"each(&block:Bytes,Bytes->)-instance-method","name":"each","doc":"Iterate over all key-value pairs","summary":"<p>Iterate over all key-value pairs</p>","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":157,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L157"},"def":{"name":"each","yields":2,"block_arity":2,"block_arg":{"name":"block","external_name":"block","restriction":"(Bytes, Bytes ->)"},"visibility":"Public","body":"iter = iterator\nbegin\n  iter.each do |k, v| yield k, v end\nensure\n  iter.close\nend\n"},"external_var":false},{"html_id":"each_string(&block:String,String->)-instance-method","name":"each_string","doc":"Iterate over all key-value pairs as strings","summary":"<p>Iterate over all key-value pairs as strings</p>","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":167,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L167"},"def":{"name":"each_string","yields":2,"block_arity":2,"block_arg":{"name":"block","external_name":"block","restriction":"(String, String ->)"},"visibility":"Public","body":"iter = iterator\nbegin\n  iter.each_string do |k, v| yield k, v end\nensure\n  iter.close\nend\n"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer is only a safety net; prefer explicit close or block-style open.","summary":"<p>Finalizer is only a safety net; prefer explicit close or block-style open.</p>","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":18,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L18"},"def":{"name":"finalize","visibility":"Public","body":"if @closed || @ptr.null?\nelse\n  LibLevelDB.close(@ptr)\nend"},"external_var":false},{"html_id":"get(key:Bytes|String,read_options:ReadOptions=ReadOptions.new):Bytes|Nil-instance-method","name":"get","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"args_string":"(key : Bytes | String, read_options : ReadOptions = ReadOptions.new) : Bytes | Nil","args_html":"(key : Bytes | String, read_options : <a href=\"../LevelDB/ReadOptions.html\">ReadOptions</a> = <span class=\"t\">ReadOptions</span>.new) : Bytes | Nil","location":{"filename":"src/leveldb/db.cr","line_number":54,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L54"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"return_type":"Bytes | ::Nil","visibility":"Public","body":"ensure_not_closed!\nkey_ptr, key_len = to_bytes(key)\nvallen = Pointer(LibC::SizeT).malloc(1_u64)\nerr = Pointer(Pointer(LibC::Char)).malloc(1_u64)\nerr.value = Pointer(LibC::Char).null\nval_ptr = LibLevelDB.get(@ptr, read_options.handle, key_ptr, key_len, vallen, err)\nLevelDB.raise_if_error(err)\nif val_ptr.null?\n  return nil\nend\nbegin\n  len = vallen.value\n  if len == 0\n    return Bytes.empty\n  end\n\n  (Bytes.new(val_ptr, len)).clone\nensure\n  if val_ptr.null?\n  else\n    LibLevelDB.free(val_ptr.as(Pointer(Void)))\n  end\nend\n"},"external_var":false},{"html_id":"get_string(key:Bytes|String,read_options:ReadOptions=ReadOptions.new):String|Nil-instance-method","name":"get_string","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"args_string":"(key : Bytes | String, read_options : ReadOptions = ReadOptions.new) : String | Nil","args_html":"(key : Bytes | String, read_options : <a href=\"../LevelDB/ReadOptions.html\">ReadOptions</a> = <span class=\"t\">ReadOptions</span>.new) : String | Nil","location":{"filename":"src/leveldb/db.cr","line_number":73,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L73"},"def":{"name":"get_string","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"return_type":"String | ::Nil","visibility":"Public","body":"bytes = get(key, read_options)\nbytes ? String.new(bytes) : nil\n"},"external_var":false},{"html_id":"iterator(read_options:ReadOptions=ReadOptions.new):Iterator-instance-method","name":"iterator","doc":"Create an iterator","summary":"<p>Create an iterator</p>","abstract":false,"args":[{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"args_string":"(read_options : ReadOptions = ReadOptions.new) : Iterator","args_html":"(read_options : <a href=\"../LevelDB/ReadOptions.html\">ReadOptions</a> = <span class=\"t\">ReadOptions</span>.new) : <a href=\"../LevelDB/Iterator.html\">Iterator</a>","location":{"filename":"src/leveldb/db.cr","line_number":141,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L141"},"def":{"name":"iterator","args":[{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"return_type":"Iterator","visibility":"Public","body":"ensure_not_closed!\nIterator.new(self, read_options)\n"},"external_var":false},{"html_id":"iterator(read_options:ReadOptions=ReadOptions.new,&)-instance-method","name":"iterator","doc":"Block-style iterator usage with ensure close","summary":"<p>Block-style iterator usage with ensure close</p>","abstract":false,"args":[{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"args_string":"(read_options : ReadOptions = ReadOptions.new, &)","args_html":"(read_options : <a href=\"../LevelDB/ReadOptions.html\">ReadOptions</a> = <span class=\"t\">ReadOptions</span>.new, &)","location":{"filename":"src/leveldb/db.cr","line_number":147,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L147"},"def":{"name":"iterator","args":[{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"yields":1,"block_arity":1,"visibility":"Public","body":"it = iterator(read_options)\nbegin\n  yield it\nensure\n  it.close\nend\n"},"external_var":false},{"html_id":"property(name:String):String|Nil-instance-method","name":"property","doc":"Get database property value","summary":"<p>Get database property value</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String) : String | Nil","args_html":"(name : String) : String | Nil","location":{"filename":"src/leveldb/db.cr","line_number":115,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L115"},"def":{"name":"property","args":[{"name":"name","external_name":"name","restriction":"String"}],"return_type":"String | ::Nil","visibility":"Public","body":"ensure_not_closed!\nprop_ptr = LibLevelDB.property_value(@ptr, name)\nif prop_ptr.null?\n  return nil\nend\nbegin\n  String.new(prop_ptr)\nensure\n  if prop_ptr.null?\n  else\n    LibLevelDB.free(prop_ptr.as(Pointer(Void)))\n  end\nend\n"},"external_var":false},{"html_id":"ptr:LibLevelDB::DB-instance-method","name":"ptr","abstract":false,"location":{"filename":"src/leveldb/db.cr","line_number":6,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L6"},"def":{"name":"ptr","return_type":"LibLevelDB::DB","visibility":"Public","body":"@ptr"},"external_var":false},{"html_id":"put(key:Bytes|String,value:Bytes|String,write_options:WriteOptions=WriteOptions.new)-instance-method","name":"put","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"value","external_name":"value","restriction":"Bytes | String"},{"name":"write_options","default_value":"WriteOptions.new","external_name":"write_options","restriction":"WriteOptions"}],"args_string":"(key : Bytes | String, value : Bytes | String, write_options : WriteOptions = WriteOptions.new)","args_html":"(key : Bytes | String, value : Bytes | String, write_options : <a href=\"../LevelDB/WriteOptions.html\">WriteOptions</a> = <span class=\"t\">WriteOptions</span>.new)","location":{"filename":"src/leveldb/db.cr","line_number":43,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L43"},"def":{"name":"put","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"value","external_name":"value","restriction":"Bytes | String"},{"name":"write_options","default_value":"WriteOptions.new","external_name":"write_options","restriction":"WriteOptions"}],"visibility":"Public","body":"ensure_not_closed!\nkey_ptr, key_len = to_bytes(key)\nval_ptr, val_len = to_bytes(value)\nerr = Pointer(Pointer(LibC::Char)).malloc(1_u64)\nerr.value = Pointer(LibC::Char).null\nLibLevelDB.put(@ptr, write_options.handle, key_ptr, key_len, val_ptr, val_len, err)\nLevelDB.raise_if_error(err)\nnil\n"},"external_var":false},{"html_id":"release_snapshot(snapshot:LibLevelDB::Snapshot)-instance-method","name":"release_snapshot","doc":"Release a snapshot","summary":"<p>Release a snapshot</p>","abstract":false,"args":[{"name":"snapshot","external_name":"snapshot","restriction":"LibLevelDB::Snapshot"}],"args_string":"(snapshot : LibLevelDB::Snapshot)","args_html":"(snapshot : LibLevelDB::Snapshot)","location":{"filename":"src/leveldb/db.cr","line_number":109,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L109"},"def":{"name":"release_snapshot","args":[{"name":"snapshot","external_name":"snapshot","restriction":"LibLevelDB::Snapshot"}],"visibility":"Public","body":"ensure_not_closed!\nLibLevelDB.release_snapshot(@ptr, snapshot)\n"},"external_var":false},{"html_id":"write(batch:WriteBatch,write_options:WriteOptions=WriteOptions.new)-instance-method","name":"write","abstract":false,"args":[{"name":"batch","external_name":"batch","restriction":"WriteBatch"},{"name":"write_options","default_value":"WriteOptions.new","external_name":"write_options","restriction":"WriteOptions"}],"args_string":"(batch : WriteBatch, write_options : WriteOptions = WriteOptions.new)","args_html":"(batch : <a href=\"../LevelDB/WriteBatch.html\">WriteBatch</a>, write_options : <a href=\"../LevelDB/WriteOptions.html\">WriteOptions</a> = <span class=\"t\">WriteOptions</span>.new)","location":{"filename":"src/leveldb/db.cr","line_number":93,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/db.cr#L93"},"def":{"name":"write","args":[{"name":"batch","external_name":"batch","restriction":"WriteBatch"},{"name":"write_options","default_value":"WriteOptions.new","external_name":"write_options","restriction":"WriteOptions"}],"visibility":"Public","body":"ensure_not_closed!\nerr = Pointer(Pointer(LibC::Char)).malloc(1_u64)\nerr.value = Pointer(LibC::Char).null\nLibLevelDB.write(@ptr, write_options.handle, batch.handle, err)\nLevelDB.raise_if_error(err)\nnil\n"},"external_var":false}]},{"html_id":"leveldb/LevelDB/Error","path":"LevelDB/Error.html","kind":"class","full_name":"LevelDB::Error","name":"Error","abstract":false,"superclass":{"html_id":"leveldb/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"leveldb/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"leveldb/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/leveldb/errors.cr","line_number":3,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/errors.cr#L3"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"leveldb/LevelDB","kind":"module","full_name":"LevelDB","name":"LevelDB"},"doc":"Generic LevelDB error","summary":"<p>Generic LevelDB error</p>"},{"html_id":"leveldb/LevelDB/Iterator","path":"LevelDB/Iterator.html","kind":"class","full_name":"LevelDB::Iterator","name":"Iterator","abstract":false,"superclass":{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"leveldb/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/leveldb/iterator.cr","line_number":5,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L5"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"leveldb/LevelDB","kind":"module","full_name":"LevelDB","name":"LevelDB"},"constructors":[{"html_id":"new(db:DB,read_options:ReadOptions=ReadOptions.new)-class-method","name":"new","abstract":false,"args":[{"name":"db","external_name":"db","restriction":"DB"},{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"args_string":"(db : DB, read_options : ReadOptions = ReadOptions.new)","args_html":"(db : <a href=\"../LevelDB/DB.html\">DB</a>, read_options : <a href=\"../LevelDB/ReadOptions.html\">ReadOptions</a> = <span class=\"t\">ReadOptions</span>.new)","location":{"filename":"src/leveldb/iterator.cr","line_number":8,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L8"},"def":{"name":"new","args":[{"name":"db","external_name":"db","restriction":"DB"},{"name":"read_options","default_value":"ReadOptions.new","external_name":"read_options","restriction":"ReadOptions"}],"visibility":"Public","body":"_ = allocate\n_.initialize(db, read_options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"check_error-instance-method","name":"check_error","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":104,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L104"},"def":{"name":"check_error","visibility":"Public","body":"ensure_not_closed!\nerr = Pointer(Pointer(LibC::Char)).malloc(1_u64)\nerr.value = Pointer(LibC::Char).null\nLibLevelDB.iter_get_error(@ptr, err)\nLevelDB.raise_if_error(err)\nnil\n"},"external_var":false},{"html_id":"close-instance-method","name":"close","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":113,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L113"},"def":{"name":"close","visibility":"Public","body":"if @closed\n  return\nend\n@closed = true\nif @ptr.null?\nelse\n  LibLevelDB.iter_destroy(@ptr)\nend\n@ptr = Pointer(Void).null.as(LibLevelDB::Iterator)\n"},"external_var":false},{"html_id":"closed?:Bool-instance-method","name":"closed?","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":120,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L120"},"def":{"name":"closed?","visibility":"Public","body":"@closed"},"external_var":false},{"html_id":"each(&block:Bytes,Bytes->)-instance-method","name":"each","doc":"Yields each key-value pair","summary":"<p>Yields each key-value pair</p>","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":87,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L87"},"def":{"name":"each","yields":2,"block_arity":2,"block_arg":{"name":"block","external_name":"block","restriction":"(Bytes, Bytes ->)"},"visibility":"Public","body":"ensure_not_closed!\nseek_to_first\nwhile valid?\n  yield key, value\n  self.next\nend\ncheck_error\n"},"external_var":false},{"html_id":"each_string(&block:String,String->)-instance-method","name":"each_string","doc":"Yields each key-value pair as strings","summary":"<p>Yields each key-value pair as strings</p>","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":98,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L98"},"def":{"name":"each_string","yields":2,"block_arity":2,"block_arg":{"name":"block","external_name":"block","restriction":"(String, String ->)"},"visibility":"Public","body":"each do |k, v|\n  yield String.new(k), String.new(v)\nend"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer is only a safety net; prefer explicit close or block usage.","summary":"<p>Finalizer is only a safety net; prefer explicit close or block usage.</p>","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":16,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L16"},"def":{"name":"finalize","visibility":"Public","body":"if @closed || @ptr.null?\nelse\n  LibLevelDB.iter_destroy(@ptr)\nend"},"external_var":false},{"html_id":"key:Bytes-instance-method","name":"key","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":56,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L56"},"def":{"name":"key","return_type":"Bytes","visibility":"Public","body":"ensure_not_closed!\nif valid?\nelse\n  raise(Error.new(\"Iterator is not valid\"))\nend\nlenp = Pointer(LibC::SizeT).malloc(1_u64)\nkptr = LibLevelDB.iter_key(@ptr, lenp)\nif kptr.null?\n  raise(Error.new(\"Failed to get key\"))\nend\nlen = lenp.value\nif len == 0\n  return Bytes.empty\nend\n(Bytes.new(kptr, len)).clone\n"},"external_var":false},{"html_id":"key_string:String-instance-method","name":"key_string","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":67,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L67"},"def":{"name":"key_string","return_type":"String","visibility":"Public","body":"String.new(key)"},"external_var":false},{"html_id":"next-instance-method","name":"next","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":44,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L44"},"def":{"name":"next","visibility":"Public","body":"ensure_not_closed!\nLibLevelDB.iter_next(@ptr)\nself\n"},"external_var":false},{"html_id":"prev-instance-method","name":"prev","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":50,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L50"},"def":{"name":"prev","visibility":"Public","body":"ensure_not_closed!\nLibLevelDB.iter_prev(@ptr)\nself\n"},"external_var":false},{"html_id":"ptr:LibLevelDB::Iterator-instance-method","name":"ptr","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":6,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L6"},"def":{"name":"ptr","return_type":"LibLevelDB::Iterator","visibility":"Public","body":"@ptr"},"external_var":false},{"html_id":"seek(key:Bytes|String)-instance-method","name":"seek","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"}],"args_string":"(key : Bytes | String)","args_html":"(key : Bytes | String)","location":{"filename":"src/leveldb/iterator.cr","line_number":37,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L37"},"def":{"name":"seek","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"}],"visibility":"Public","body":"ensure_not_closed!\nkptr, klen = to_bytes(key)\nLibLevelDB.iter_seek(@ptr, kptr, klen)\nself\n"},"external_var":false},{"html_id":"seek_to_first-instance-method","name":"seek_to_first","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":25,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L25"},"def":{"name":"seek_to_first","visibility":"Public","body":"ensure_not_closed!\nLibLevelDB.iter_seek_to_first(@ptr)\nself\n"},"external_var":false},{"html_id":"seek_to_last-instance-method","name":"seek_to_last","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":31,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L31"},"def":{"name":"seek_to_last","visibility":"Public","body":"ensure_not_closed!\nLibLevelDB.iter_seek_to_last(@ptr)\nself\n"},"external_var":false},{"html_id":"valid?:Bool-instance-method","name":"valid?","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":20,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L20"},"def":{"name":"valid?","return_type":"Bool","visibility":"Public","body":"ensure_not_closed!\n(LibLevelDB.iter_valid(@ptr)) != 0_u8\n"},"external_var":false},{"html_id":"value:Bytes-instance-method","name":"value","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":71,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L71"},"def":{"name":"value","return_type":"Bytes","visibility":"Public","body":"ensure_not_closed!\nif valid?\nelse\n  raise(Error.new(\"Iterator is not valid\"))\nend\nlenp = Pointer(LibC::SizeT).malloc(1_u64)\nvptr = LibLevelDB.iter_value(@ptr, lenp)\nif vptr.null?\n  raise(Error.new(\"Failed to get value\"))\nend\nlen = lenp.value\nif len == 0\n  return Bytes.empty\nend\n(Bytes.new(vptr, len)).clone\n"},"external_var":false},{"html_id":"value_string:String-instance-method","name":"value_string","abstract":false,"location":{"filename":"src/leveldb/iterator.cr","line_number":82,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/iterator.cr#L82"},"def":{"name":"value_string","return_type":"String","visibility":"Public","body":"String.new(value)"},"external_var":false}]},{"html_id":"leveldb/LevelDB/Options","path":"LevelDB/Options.html","kind":"class","full_name":"LevelDB::Options","name":"Options","abstract":false,"superclass":{"html_id":"leveldb/LevelDB/Handle","kind":"class","full_name":"LevelDB::Handle","name":"Handle"},"ancestors":[{"html_id":"leveldb/LevelDB/Handle","kind":"class","full_name":"LevelDB::Handle","name":"Handle"},{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"leveldb/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/leveldb/options.cr","line_number":10,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L10"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"leveldb/LevelDB","kind":"module","full_name":"LevelDB","name":"LevelDB"},"constructors":[{"html_id":"new(create_if_missing:Bool|Nil=nil,error_if_exists:Bool|Nil=nil,paranoid_checks:Bool|Nil=nil,write_buffer_size:Int|Nil=nil,max_open_files:Int|Nil=nil,block_size:Int|Nil=nil,block_restart_interval:Int|Nil=nil,max_file_size:Int|Nil=nil,compression:LibLevelDB::Compression|Int32|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"create_if_missing","default_value":"nil","external_name":"create_if_missing","restriction":"Bool | ::Nil"},{"name":"error_if_exists","default_value":"nil","external_name":"error_if_exists","restriction":"Bool | ::Nil"},{"name":"paranoid_checks","default_value":"nil","external_name":"paranoid_checks","restriction":"Bool | ::Nil"},{"name":"write_buffer_size","default_value":"nil","external_name":"write_buffer_size","restriction":"Int | ::Nil"},{"name":"max_open_files","default_value":"nil","external_name":"max_open_files","restriction":"Int | ::Nil"},{"name":"block_size","default_value":"nil","external_name":"block_size","restriction":"Int | ::Nil"},{"name":"block_restart_interval","default_value":"nil","external_name":"block_restart_interval","restriction":"Int | ::Nil"},{"name":"max_file_size","default_value":"nil","external_name":"max_file_size","restriction":"Int | ::Nil"},{"name":"compression","default_value":"nil","external_name":"compression","restriction":"LibLevelDB::Compression | Int32 | ::Nil"}],"args_string":"(create_if_missing : Bool | Nil = nil, error_if_exists : Bool | Nil = nil, paranoid_checks : Bool | Nil = nil, write_buffer_size : Int | Nil = nil, max_open_files : Int | Nil = nil, block_size : Int | Nil = nil, block_restart_interval : Int | Nil = nil, max_file_size : Int | Nil = nil, compression : LibLevelDB::Compression | Int32 | Nil = nil)","args_html":"(create_if_missing : Bool | Nil = <span class=\"n\">nil</span>, error_if_exists : Bool | Nil = <span class=\"n\">nil</span>, paranoid_checks : Bool | Nil = <span class=\"n\">nil</span>, write_buffer_size : Int | Nil = <span class=\"n\">nil</span>, max_open_files : Int | Nil = <span class=\"n\">nil</span>, block_size : Int | Nil = <span class=\"n\">nil</span>, block_restart_interval : Int | Nil = <span class=\"n\">nil</span>, max_file_size : Int | Nil = <span class=\"n\">nil</span>, compression : LibLevelDB::Compression | Int32 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/leveldb/options.cr","line_number":11,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L11"},"def":{"name":"new","args":[{"name":"create_if_missing","default_value":"nil","external_name":"create_if_missing","restriction":"Bool | ::Nil"},{"name":"error_if_exists","default_value":"nil","external_name":"error_if_exists","restriction":"Bool | ::Nil"},{"name":"paranoid_checks","default_value":"nil","external_name":"paranoid_checks","restriction":"Bool | ::Nil"},{"name":"write_buffer_size","default_value":"nil","external_name":"write_buffer_size","restriction":"Int | ::Nil"},{"name":"max_open_files","default_value":"nil","external_name":"max_open_files","restriction":"Int | ::Nil"},{"name":"block_size","default_value":"nil","external_name":"block_size","restriction":"Int | ::Nil"},{"name":"block_restart_interval","default_value":"nil","external_name":"block_restart_interval","restriction":"Int | ::Nil"},{"name":"max_file_size","default_value":"nil","external_name":"max_file_size","restriction":"Int | ::Nil"},{"name":"compression","default_value":"nil","external_name":"compression","restriction":"LibLevelDB::Compression | Int32 | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(create_if_missing, error_if_exists, paranoid_checks, write_buffer_size, max_open_files, block_size, block_restart_interval, max_file_size, compression)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"block_restart_interval=(n:Int)-instance-method","name":"block_restart_interval=","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : Int)","location":{"filename":"src/leveldb/options.cr","line_number":78,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L78"},"def":{"name":"block_restart_interval=","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"LibLevelDB.options_set_block_restart_interval(handle, n.to_i)\nn\n"},"external_var":false},{"html_id":"block_size=(size:Int)-instance-method","name":"block_size=","abstract":false,"args":[{"name":"size","external_name":"size","restriction":"Int"}],"args_string":"(size : Int)","args_html":"(size : Int)","location":{"filename":"src/leveldb/options.cr","line_number":73,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L73"},"def":{"name":"block_size=","args":[{"name":"size","external_name":"size","restriction":"Int"}],"visibility":"Public","body":"LibLevelDB.options_set_block_size(handle, size.to_u64)\nsize\n"},"external_var":false},{"html_id":"close-instance-method","name":"close","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":41,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L41"},"def":{"name":"close","visibility":"Public","body":"if @handle.nil?\n  return\nend\nLibLevelDB.options_destroy(@handle.not_nil!)\n@handle = Pointer(Void).null.as(LibLevelDB::Options)\n"},"external_var":false},{"html_id":"compression=(c:LibLevelDB::Compression|Int32)-instance-method","name":"compression=","abstract":false,"args":[{"name":"c","external_name":"c","restriction":"LibLevelDB::Compression | Int32"}],"args_string":"(c : LibLevelDB::Compression | Int32)","args_html":"(c : LibLevelDB::Compression | Int32)","location":{"filename":"src/leveldb/options.cr","line_number":88,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L88"},"def":{"name":"compression=","args":[{"name":"c","external_name":"c","restriction":"LibLevelDB::Compression | Int32"}],"visibility":"Public","body":"LibLevelDB.options_set_compression(handle, c.to_i)\nc\n"},"external_var":false},{"html_id":"create_if_missing=(v:Bool)-instance-method","name":"create_if_missing=","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Bool"}],"args_string":"(v : Bool)","args_html":"(v : Bool)","location":{"filename":"src/leveldb/options.cr","line_number":48,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L48"},"def":{"name":"create_if_missing=","args":[{"name":"v","external_name":"v","restriction":"Bool"}],"visibility":"Public","body":"LibLevelDB.options_set_create_if_missing(handle, v ? 1_u8 : 0_u8)\nv\n"},"external_var":false},{"html_id":"error_if_exists=(v:Bool)-instance-method","name":"error_if_exists=","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Bool"}],"args_string":"(v : Bool)","args_html":"(v : Bool)","location":{"filename":"src/leveldb/options.cr","line_number":53,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L53"},"def":{"name":"error_if_exists=","args":[{"name":"v","external_name":"v","restriction":"Bool"}],"visibility":"Public","body":"LibLevelDB.options_set_error_if_exists(handle, v ? 1_u8 : 0_u8)\nv\n"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer is a safety net. Prefer using with a block or explicit close.","summary":"<p>Finalizer is a safety net.</p>","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":36,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L36"},"def":{"name":"finalize","visibility":"Public","body":"if @handle.nil?\n  return\nend\nLibLevelDB.options_destroy(@handle.not_nil!)\n"},"external_var":false},{"html_id":"max_file_size=(size:Int)-instance-method","name":"max_file_size=","abstract":false,"args":[{"name":"size","external_name":"size","restriction":"Int"}],"args_string":"(size : Int)","args_html":"(size : Int)","location":{"filename":"src/leveldb/options.cr","line_number":83,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L83"},"def":{"name":"max_file_size=","args":[{"name":"size","external_name":"size","restriction":"Int"}],"visibility":"Public","body":"LibLevelDB.options_set_max_file_size(handle, size.to_u64)\nsize\n"},"external_var":false},{"html_id":"max_open_files=(n:Int)-instance-method","name":"max_open_files=","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : Int)","location":{"filename":"src/leveldb/options.cr","line_number":68,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L68"},"def":{"name":"max_open_files=","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"LibLevelDB.options_set_max_open_files(handle, n.to_i)\nn\n"},"external_var":false},{"html_id":"paranoid_checks=(v:Bool)-instance-method","name":"paranoid_checks=","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Bool"}],"args_string":"(v : Bool)","args_html":"(v : Bool)","location":{"filename":"src/leveldb/options.cr","line_number":58,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L58"},"def":{"name":"paranoid_checks=","args":[{"name":"v","external_name":"v","restriction":"Bool"}],"visibility":"Public","body":"LibLevelDB.options_set_paranoid_checks(handle, v ? 1_u8 : 0_u8)\nv\n"},"external_var":false},{"html_id":"write_buffer_size=(size:Int)-instance-method","name":"write_buffer_size=","abstract":false,"args":[{"name":"size","external_name":"size","restriction":"Int"}],"args_string":"(size : Int)","args_html":"(size : Int)","location":{"filename":"src/leveldb/options.cr","line_number":63,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L63"},"def":{"name":"write_buffer_size=","args":[{"name":"size","external_name":"size","restriction":"Int"}],"visibility":"Public","body":"LibLevelDB.options_set_write_buffer_size(handle, size.to_u64)\nsize\n"},"external_var":false}]},{"html_id":"leveldb/LevelDB/ReadOptions","path":"LevelDB/ReadOptions.html","kind":"class","full_name":"LevelDB::ReadOptions","name":"ReadOptions","abstract":false,"superclass":{"html_id":"leveldb/LevelDB/Handle","kind":"class","full_name":"LevelDB::Handle","name":"Handle"},"ancestors":[{"html_id":"leveldb/LevelDB/Handle","kind":"class","full_name":"LevelDB::Handle","name":"Handle"},{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"leveldb/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/leveldb/options.cr","line_number":94,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L94"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"leveldb/LevelDB","kind":"module","full_name":"LevelDB","name":"LevelDB"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":95,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L95"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"close-instance-method","name":"close","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":105,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L105"},"def":{"name":"close","visibility":"Public","body":"if @handle.nil?\n  return\nend\nLibLevelDB.readoptions_destroy(@handle.not_nil!)\n@handle = Pointer(Void).null.as(LibLevelDB::ReadOptions)\n"},"external_var":false},{"html_id":"fill_cache=(v:Bool)-instance-method","name":"fill_cache=","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Bool"}],"args_string":"(v : Bool)","args_html":"(v : Bool)","location":{"filename":"src/leveldb/options.cr","line_number":116,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L116"},"def":{"name":"fill_cache=","args":[{"name":"v","external_name":"v","restriction":"Bool"}],"visibility":"Public","body":"LibLevelDB.readoptions_set_fill_cache(handle, v ? 1_u8 : 0_u8)\nv\n"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer is a safety net. Prefer using with a block or explicit close.","summary":"<p>Finalizer is a safety net.</p>","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":100,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L100"},"def":{"name":"finalize","visibility":"Public","body":"if @handle.nil?\n  return\nend\nLibLevelDB.readoptions_destroy(@handle.not_nil!)\n"},"external_var":false},{"html_id":"snapshot=(snap:LibLevelDB::Snapshot)-instance-method","name":"snapshot=","abstract":false,"args":[{"name":"snap","external_name":"snap","restriction":"LibLevelDB::Snapshot"}],"args_string":"(snap : LibLevelDB::Snapshot)","args_html":"(snap : LibLevelDB::Snapshot)","location":{"filename":"src/leveldb/options.cr","line_number":121,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L121"},"def":{"name":"snapshot=","args":[{"name":"snap","external_name":"snap","restriction":"LibLevelDB::Snapshot"}],"visibility":"Public","body":"LibLevelDB.readoptions_set_snapshot(handle, snap)\nsnap\n"},"external_var":false},{"html_id":"verify_checksums=(v:Bool)-instance-method","name":"verify_checksums=","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Bool"}],"args_string":"(v : Bool)","args_html":"(v : Bool)","location":{"filename":"src/leveldb/options.cr","line_number":111,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L111"},"def":{"name":"verify_checksums=","args":[{"name":"v","external_name":"v","restriction":"Bool"}],"visibility":"Public","body":"LibLevelDB.readoptions_set_verify_checksums(handle, v ? 1_u8 : 0_u8)\nv\n"},"external_var":false}]},{"html_id":"leveldb/LevelDB/WriteBatch","path":"LevelDB/WriteBatch.html","kind":"class","full_name":"LevelDB::WriteBatch","name":"WriteBatch","abstract":false,"superclass":{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"leveldb/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/leveldb/write_batch.cr","line_number":4,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L4"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"leveldb/LevelDB","kind":"module","full_name":"LevelDB","name":"LevelDB"},"class_methods":[{"html_id":"build(&)-class-method","name":"build","abstract":false,"location":{"filename":"src/leveldb/write_batch.cr","line_number":22,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L22"},"def":{"name":"build","yields":1,"block_arity":1,"visibility":"Public","body":"b = new\nbegin\n  yield b\n  b\nrescue ex\n  b.close\n  raise(ex)\nend\n"},"external_var":false}],"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/leveldb/write_batch.cr","line_number":7,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L7"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"append(other:WriteBatch)-instance-method","name":"append","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"WriteBatch"}],"args_string":"(other : WriteBatch)","args_html":"(other : <a href=\"../LevelDB/WriteBatch.html\">WriteBatch</a>)","location":{"filename":"src/leveldb/write_batch.cr","line_number":48,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L48"},"def":{"name":"append","args":[{"name":"other","external_name":"other","restriction":"WriteBatch"}],"visibility":"Public","body":"LibLevelDB.writebatch_append(@handle, other.handle)"},"external_var":false},{"html_id":"clear-instance-method","name":"clear","abstract":false,"location":{"filename":"src/leveldb/write_batch.cr","line_number":33,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L33"},"def":{"name":"clear","visibility":"Public","body":"LibLevelDB.writebatch_clear(@handle)"},"external_var":false},{"html_id":"close-instance-method","name":"close","abstract":false,"location":{"filename":"src/leveldb/write_batch.cr","line_number":16,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L16"},"def":{"name":"close","visibility":"Public","body":"if @handle.null?\n  return\nend\nLibLevelDB.writebatch_destroy(@handle)\n@handle = Pointer(Void).null.as(LibLevelDB::WriteBatch)\n"},"external_var":false},{"html_id":"delete(key:Bytes|String)-instance-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"}],"args_string":"(key : Bytes | String)","args_html":"(key : Bytes | String)","location":{"filename":"src/leveldb/write_batch.cr","line_number":43,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L43"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"}],"visibility":"Public","body":"kptr, klen = to_bytes(key)\nLibLevelDB.writebatch_delete(@handle, kptr, klen)\n"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer is only a safety net; prefer explicit close or block usage.","summary":"<p>Finalizer is only a safety net; prefer explicit close or block usage.</p>","abstract":false,"location":{"filename":"src/leveldb/write_batch.cr","line_number":12,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L12"},"def":{"name":"finalize","visibility":"Public","body":"if @handle.null?\nelse\n  LibLevelDB.writebatch_destroy(@handle)\nend"},"external_var":false},{"html_id":"handle:LibLevelDB::WriteBatch-instance-method","name":"handle","abstract":false,"location":{"filename":"src/leveldb/write_batch.cr","line_number":5,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L5"},"def":{"name":"handle","return_type":"LibLevelDB::WriteBatch","visibility":"Public","body":"@handle"},"external_var":false},{"html_id":"put(key:Bytes|String,value:Bytes|String)-instance-method","name":"put","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"value","external_name":"value","restriction":"Bytes | String"}],"args_string":"(key : Bytes | String, value : Bytes | String)","args_html":"(key : Bytes | String, value : Bytes | String)","location":{"filename":"src/leveldb/write_batch.cr","line_number":37,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/write_batch.cr#L37"},"def":{"name":"put","args":[{"name":"key","external_name":"key","restriction":"Bytes | String"},{"name":"value","external_name":"value","restriction":"Bytes | String"}],"visibility":"Public","body":"kptr, klen = to_bytes(key)\nvptr, vlen = to_bytes(value)\nLibLevelDB.writebatch_put(@handle, kptr, klen, vptr, vlen)\n"},"external_var":false}]},{"html_id":"leveldb/LevelDB/WriteOptions","path":"LevelDB/WriteOptions.html","kind":"class","full_name":"LevelDB::WriteOptions","name":"WriteOptions","abstract":false,"superclass":{"html_id":"leveldb/LevelDB/Handle","kind":"class","full_name":"LevelDB::Handle","name":"Handle"},"ancestors":[{"html_id":"leveldb/LevelDB/Handle","kind":"class","full_name":"LevelDB::Handle","name":"Handle"},{"html_id":"leveldb/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"leveldb/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/leveldb/options.cr","line_number":127,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L127"}],"repository_name":"leveldb","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"leveldb/LevelDB","kind":"module","full_name":"LevelDB","name":"LevelDB"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":128,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L128"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"close-instance-method","name":"close","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":138,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L138"},"def":{"name":"close","visibility":"Public","body":"if @handle.nil?\n  return\nend\nLibLevelDB.writeoptions_destroy(@handle.not_nil!)\n@handle = Pointer(Void).null.as(LibLevelDB::WriteOptions)\n"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer is a safety net. Prefer using with a block or explicit close.","summary":"<p>Finalizer is a safety net.</p>","abstract":false,"location":{"filename":"src/leveldb/options.cr","line_number":133,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L133"},"def":{"name":"finalize","visibility":"Public","body":"if @handle.nil?\n  return\nend\nLibLevelDB.writeoptions_destroy(@handle.not_nil!)\n"},"external_var":false},{"html_id":"sync=(v:Bool)-instance-method","name":"sync=","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Bool"}],"args_string":"(v : Bool)","args_html":"(v : Bool)","location":{"filename":"src/leveldb/options.cr","line_number":144,"url":"https://github.com/kojix2/leveldb/blob/60b349f878b5085f12d068e28f4dbb7f2bcc90ea/src/leveldb/options.cr#L144"},"def":{"name":"sync=","args":[{"name":"v","external_name":"v","restriction":"Bool"}],"visibility":"Public","body":"LibLevelDB.writeoptions_set_sync(handle, v ? 1_u8 : 0_u8)\nv\n"},"external_var":false}]}]}]}}